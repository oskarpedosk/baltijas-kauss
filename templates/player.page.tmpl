{{template "base" .}}

{{define "content"}}

<title>{{.Data.player.FirstName}} {{.Data.player.LastName}} | Baltijas Kauss</title>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <img class="img-fluid" src="/static/images/players/{{.Data.player.ImgID}}" alt="">
        </div>
        <div class="col-md-4 align-self-end">
            <h1 class="mb-0">{{.Data.player.FirstName}}</h1>
            <h1 class="mb-0">{{.Data.player.LastName}}</h1>
            <p class="mb-1 text-muted">{{.Data.player.Archetype}}</p>
            <p class="mb-1" style="margin-top: 2px;">
                <span class="player-badge-big bronze">{{.Data.player.BronzeBadges}}</span>
                <span class="player-badge-big silver">{{.Data.player.SilverBadges}}</span>
                <span class="player-badge-big gold">{{.Data.player.GoldBadges}}</span>
                <span class="player-badge-big hof">{{.Data.player.HOFBadges}}</span>
                <span class="player-badge-big total">{{.Data.player.TotalBadges}}</span>
            </p>
        </div>
        <div class="col-md-2 text-center align-self-center">
                <p class="overall-badge-big" overall-color="{{.Data.player.Overall}}">{{.Data.player.Overall}}</p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-3">
            <div class="row">
                <div class="col-md-12 p-3">
                    <div class="pt-3">
                        <p class="text-muted">Positions<span class="text-dark"> {{.Data.player.PrimaryPosition}}{{if .Data.player.SecondaryPosition}}/{{end}}{{.Data.player.SecondaryPosition}}</span></p>
                        <p class="text-muted">Team<span class="text-dark"> {{$.Data.team.Name}}</span></p>
                        <p class="text-muted">Height<span class="text-dark"> {{.Data.player.Height}}cm</span></p>
                        <p class="text-muted">Weight<span class="text-dark"> {{.Data.player.Weight}}kg</span></p>
                        <p class="text-muted">Nationality<span class="text-dark"> {{.Data.player.Nationality}}</span></p>
                        <p class="text-muted">Birthdate<span class="text-dark"> {{.Data.player.Birthdate}}</span></p>
                        <p class="text-muted">Jersey<span class="text-dark"> {{.Data.player.Jersey}}</span></p>
                        <p class="text-muted">NBA Team<span class="text-dark"> {{.Data.player.NBATeam}}</span></p>
                    </div>
                </div>
            </div>
            <!-- <div class="row py-3 bg-light my-2 pointer" data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="dropdown-menu" style="max-width: 200px">
                        {{range $team := .Data.teams}}
                        <li class="dropdown-item" onclick="changeTeam('{{$.Data.player.PlayerID}}', '{{$team.TeamID}}', '{{$.CSRFToken}}')">
                            {{$team.Abbreviation}} {{$team.Name}}
                        </li>
                        {{end}}
                        <hr class="dropdown-divider">
                        <li class="dropdown-item" onclick="changeTeam('{{.Data.player.PlayerID}}', '{{.Data.FA.TeamID}}', '{{$.CSRFToken}}')">
                            {{.Data.FA.Name}}
                        </li>
                    </div>
                    <p class="mb-1"><span style="background-image: linear-gradient(90deg, {{.Data.team.Color1}}, {{.Data.team.Color2}})" 
                    class="team-badge {{if eq .Data.team.DarkText "true"}}text-dark{{end}}">{{$.Data.team.Abbreviation}}</span></p>
                    <p class="mb-1">Team</p>
            </div> -->
        </div>
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesOutsideScoring}}" class="attribute-badge">{{.Data.player.AttributesOutsideScoring}}</span> Outside Scoring</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesCloseShot}}" class="attribute-badge">{{.Data.player.AttributesCloseShot}}</span> Close Shot</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesMidRangeShot}}" class="attribute-badge">{{.Data.player.AttributesMidRangeShot}}</span> Mid-Range Shot</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesThreePointShot}}" class="attribute-badge">{{.Data.player.AttributesThreePointShot}}</span> Three-Point Shot</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesFreeThrow}}" class="attribute-badge">{{.Data.player.AttributesFreeThrow}}</span> Free Throw</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesShotIQ}}" class="attribute-badge">{{.Data.player.AttributesShotIQ}}</span> Shot IQ</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesOffensiveConsistency}}" class="attribute-badge">{{.Data.player.AttributesOffensiveConsistency}}</span> Offensive Consistency</p>
                    </div>
                </div>
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesInsideScoring}}" class="attribute-badge">{{.Data.player.AttributesInsideScoring}}</span> Inside Scoring</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesLayup}}" class="attribute-badge">{{.Data.player.AttributesLayup}}</span> Layup</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesStandingDunk}}" class="attribute-badge">{{.Data.player.AttributesStandingDunk}}</span> Standing Dunk</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesDrivingDunk}}" class="attribute-badge">{{.Data.player.AttributesDrivingDunk}}</span> Driving Dunk</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPostHook}}" class="attribute-badge">{{.Data.player.AttributesPostHook}}</span> Post Hook</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPostFade}}" class="attribute-badge">{{.Data.player.AttributesPostFade}}</span> Post Fade</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPostControl}}" class="attribute-badge">{{.Data.player.AttributesPostControl}}</span> Post Control</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesDrawFoul}}" class="attribute-badge">{{.Data.player.AttributesDrawFoul}}</span> Draw Foul</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesHands}}" class="attribute-badge">{{.Data.player.AttributesHands}}</span> Hands</p>
                    </div>
                </div>
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesDefending}}" class="attribute-badge">{{.Data.player.AttributesDefending}}</span> Defending</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesInteriorDefense}}" class="attribute-badge">{{.Data.player.AttributesInteriorDefense}}</span> Interior Defense</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPerimeterDefense}}" class="attribute-badge">{{.Data.player.AttributesPerimeterDefense}}</span> Perimeter Defense</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesSteal}}" class="attribute-badge">{{.Data.player.AttributesSteal}}</span> Steal</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesBlock}}" class="attribute-badge">{{.Data.player.AttributesBlock}}</span> Block</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesLateralQuickness}}" class="attribute-badge">{{.Data.player.AttributesLateralQuickness}}</span> Lateral Quickness</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesHelpDefenseIQ}}" class="attribute-badge">{{.Data.player.AttributesHelpDefenseIQ}}</span> Help Defense IQ</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPassPerception}}" class="attribute-badge">{{.Data.player.AttributesPassPerception}}</span> Pass Perception</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesDefensiveConsistency}}" class="attribute-badge">{{.Data.player.AttributesDefensiveConsistency}}</span> Defensive Consistency</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesAthleticism}}" class="attribute-badge">{{.Data.player.AttributesAthleticism}}</span> Athleticism</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesSpeed}}" class="attribute-badge">{{.Data.player.AttributesSpeed}}</span> Speed</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesAcceleration}}" class="attribute-badge">{{.Data.player.AttributesAcceleration}}</span> Acceleration</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesStrength}}" class="attribute-badge">{{.Data.player.AttributesStrength}}</span> Strength</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesVertical}}" class="attribute-badge">{{.Data.player.AttributesVertical}}</span> Vertical</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesStamina}}" class="attribute-badge">{{.Data.player.AttributesStamina}}</span> Stamina</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesHustle}}" class="attribute-badge">{{.Data.player.AttributesHustle}}</span> Hustle</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesOverallDurability}}" class="attribute-badge">{{.Data.player.AttributesOverallDurability}}</span> Overall Durability</p>
                    </div>
                </div>
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesPlaymaking}}" class="attribute-badge">{{.Data.player.AttributesPlaymaking}}</span> Playmaking</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPassAccuracy}}" class="attribute-badge">{{.Data.player.AttributesPassAccuracy}}</span> Pass Accuraccy</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesBallHandle}}" class="attribute-badge">{{.Data.player.AttributesBallHandle}}</span> Ball Handle</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesSpeedWithBall}}" class="attribute-badge">{{.Data.player.AttributesSpeedWithBall}}</span> Speed With Ball</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPassIQ}}" class="attribute-badge">{{.Data.player.AttributesPassIQ}}</span> Pass IQ</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesPassVision}}" class="attribute-badge">{{.Data.player.AttributesPassVision}}</span> Pass Vision</p>
                    </div>
                </div>
                <div class="col-md-4 p-3 pb-0">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="fw-semibold"><span attribute-color="{{.Data.player.AttributesRebounding}}" class="attribute-badge">{{.Data.player.AttributesRebounding}}</span> Rebounding</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesOffensiveRebound}}" class="attribute-badge">{{.Data.player.AttributesOffensiveRebound}}</span> Offensive Rebound</p>
                        <p class="mb-1"><span attribute-color="{{.Data.player.AttributesDefensiveRebound}}" class="attribute-badge">{{.Data.player.AttributesDefensiveRebound}}</span> Defensive Rebound</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 p-3">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="mb-0" style="font-size: 25px;">{{.Data.player.AttributesPotential}}</p>
                        <p class="mb-1">Potential</p>
                    </div>
                </div>
                <div class="col-md-4 p-3">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="mb-0" style="font-size: 25px;">{{.Data.player.AttributesIntangibles}}</p>
                        <p class="mb-1">Intangibles</p>
                    </div>
                </div>
                <div class="col-md-4 p-3">
                    <div class="bg-light p-3" style="height: 100%;">
                        <p class="mb-0" style="font-size: 25px; color: rgb(0, 132, 255);">{{.Data.player.AttributesTotalAttributes}}</p>
                        <p class="mb-1">Total Attributes</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-2 bg-light">
        <h1>BADGES</h1>
    </div>
</div>

{{end}}

{{define "js"}}

<script>
    $(document).ready(function(){
    let colorRange = {
        '90-99' :'attribute1',
        '80-89' :'attribute2',
        '70-79' :'attribute3',
        '50-69' :'attribute4',
        '1-49'  :'attribute5',
        '0-0'   :'attribute6',
    };
    
    function between(value, min, max) {
        return value >= min && value <= max;
    }
    
    let color;
    let first; 
    let second;
    let attribute;
    
    $('.attribute-badge').each(function(index){
        
        attribute = $(this);
        color = parseInt($(this).attr('attribute-color'),10);
        
        $.each(colorRange, function(name, value){
            
            first = parseInt(name.split('-')[0],10);
            second = parseInt(name.split('-')[1],10);
            
            if (color === 0) {
                attribute.text('--');
                attribute.addClass('attribute6');
            } else if (between(color, first, second) ){
                attribute.addClass(value);
            }
        
        });
        
    });
    });
</script>

<script>
    $(document).ready(function(){
    let colorRange = {
        '91-99' :'overall1',
        '86-90' :'overall2',
        '81-85' :'overall3',
        '1-80'  :'overall4',
        '0-0'   :'overall5',
    };
    
    function between(value, min, max) {
        return value >= min && value <= max;
    }
    
    let color;
    let first; 
    let second;
    let overall;
    
    $('.overall-badge-big').each(function(index){
        
        overall = $(this);
        color = parseInt($(this).attr('overall-color'),10);
        
        $.each(colorRange, function(name, value){
            
            first = parseInt(name.split('-')[0],10);
            second = parseInt(name.split('-')[1],10);
            
            if( between(color, first, second) ){
                overall.addClass(value);
            }
        
        });
        
    });
    });
</script>

<script>
    function changeTeam(playerID, teamID, csrftoken) {
        $.ajax({
        type: 'POST',
        dataType: 'html',
        data : {
            csrf_token: csrftoken,
            player_id: playerID,
            team_id: teamID,
        },
        success: function(data) {
            window.location.reload();
        }
        });
    }
 </script>
 

{{end}}